# 协程

我们并不经常需要用到协程，但是当需要的时候，协程会起到一种不可比拟的作用。协程可以颠倒调用者与被调用者的关系，而且这种灵活性解决了软件架构中被称为“**谁是老大**”或者“**谁拥有主循环**”的问题。这正是对诸如**事件驱动编程**、**通过构造器构建迭代器**和**协作式多线程**等几个看上去并不相关的问题的泛化，而协程以简单高效的方式解决了这写问题。

从多线程的角度看，**协程与线程类似**：协程是一些列的可执行语句，拥有自己的**栈**、**局部变量**和**指令指针**，同时协程又与其他协程共享了**全局变量**和**其他几乎一切资源**。线程与协程的主要区别在于，一个多线程程序可以**并行**运行多个线程，而协程却需要彼此**协作地运行**，即在任意指定的时刻只有一个协程运行，且只有当正在运行的协程显式地要求被挂起时其执行才会暂停。

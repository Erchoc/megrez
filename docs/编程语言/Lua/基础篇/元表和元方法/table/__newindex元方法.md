# __newindex 元方法

元方法 `__newindex` 与 `__index` 类似，不同之处在于**前者用于表的更新而后者用于表的查询**。当对一个表中不存在的索引赋值时，解释器就会查找 `__newindex` 元方法：如果这个元方法存在，那么解释器就调用它而不执行赋值。像元方法 `__index` 一样，如果这个元方法是一个表，解释器就此表中执行赋值，而不是在原始的表中进行赋值。此外，还有一个原始函数允许我们绕过元方法：调用 `rawset(t, k, v)` 来等价于 `t[k] = v` ，但不涉及任何元方法。

组合使用元方法 `__index` 和 `__newindex` 可以实现 `Lua` 语言中的一些强大的结构，例如**只读的表**、**具有默认值的表**和**面向对象编程中的继承**。

# 泛型for的语法

上述那些迭代器都有一个缺点，即需要为每个新的循环创建一个新的闭包。对于大多数情况而言，这或许不会有什么问题。例如，在之前的allwords迭代器中，创建一个闭包的开销相对于读取整个文件的开销而言几乎可以忽略不计。但是，在另外一些情况下，这样的开销可能会很客观。在这类情况中，我们可以通过使用泛型for自己保存迭代状态。

泛型for在循环过程中在其内部保存了迭代函数。实际上，泛型for保存了三个值：一个迭代函数，一个不可变状态和一个控制变量。

泛型for的语法如下：

```lua
for var-list in exp-list do
  body
end
```

其中，var-list是由一个或多个变量名组成的列表，以逗号分割；exp-list是一个或多个表组成的列表，同样以逗号分割。通常，表达式列表只有一个元素，即一句对迭代器工厂的调用。

例如：在如下代码中，变量列表是k, v，表达式列表只有一个元素pairs(t)：

```lua
for k, v in pairs(t) do 
  print(k, v)
end
```

# 架构概述

随着业务的迅猛增长， `Yandex.Metrica` 目前已经成为世界第三大 `Web` 流量分析平台，每天处理超过 `200` 亿个跟踪事件。能够拥有如此惊人的体量，在它背后提供支撑的 `ClickHouse` 功不可没。 `ClickHouse` 已经为 `Yandex.Metrica` 存储了超过**20万亿**行的数据， `90%` 的自定义查询能够在 `1s` 内返回，其集群规模也超过了 `400` 台服务器。虽然 `ClickHouse` 起初只是为了 `Yandex.Metrica` 而研发的，但由于它出众的性能，目前也被广泛应用于 `Yandex` 内部其他数十个产品上。

初识 `ClickHouse` 可能产生这样的感觉：它仿佛违背了物理定律，没有任何缺点，是一个不真实的存在。一款**高性能**、**高可用** `OLAP` 数据库的一切诉求， `ClickHouse` 似乎都能满足。如果把数据库比作汽车，那么 `ClickHouse` 俨然就是一辆手动挡的赛车。它在很多方面不像其他系统那样高度自动化。 `ClickHouse` 的一些概念也与我们通常的理解有所不同，特别是在分片和副本方面，有些时候数据的分片甚至需要手动完成。在深入使用 `ClickHouse` 之后，就会渐渐地理解这些设计的目的。某些看是不够自动化的设计，反过来却在使用中带来了极大地灵活性。与 `Hadoop` 生态的其他数据库相比， `ClickHouse` 更像一款“**传统**” `MPP` 架构的数据库，它没有采用 `Hadoop` 生态中常用的主从架构，而是使用了**多主对等**网络结构，同时它也是基于**关系模型**的 `ROLAP` 方案。
